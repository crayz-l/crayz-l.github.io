<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>计网Chapter4 | Crayz's Blog</title><meta name="author" content="Crayz"><meta name="copyright" content="Crayz"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="1.网络层概述 主要任务：实现网络互连，实现数据包在各网络间的传输 需要解决的主要问题：  网络层向运输层提供怎样的服务（“可靠传输” or “不可靠传输”） 网络层寻址问题 路由选择问题  Internet 使用TCP&#x2F;IP协议栈，且在网络层中常使用网际协议IP，故又称网络层为网际层  2.网络层提供的两种服务 2.1 面向连接的虚电路服务 可靠通信由网络保证，故必须建立网络层的连接——虚电路V">
<meta property="og:type" content="article">
<meta property="og:title" content="计网Chapter4">
<meta property="og:url" content="http://crayz-l.github.io/posts/4240988082/index.html">
<meta property="og:site_name" content="Crayz&#39;s Blog">
<meta property="og:description" content="1.网络层概述 主要任务：实现网络互连，实现数据包在各网络间的传输 需要解决的主要问题：  网络层向运输层提供怎样的服务（“可靠传输” or “不可靠传输”） 网络层寻址问题 路由选择问题  Internet 使用TCP&#x2F;IP协议栈，且在网络层中常使用网际协议IP，故又称网络层为网际层  2.网络层提供的两种服务 2.1 面向连接的虚电路服务 可靠通信由网络保证，故必须建立网络层的连接——虚电路V">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://crayz-l.github.io/img/avator.jpg">
<meta property="article:published_time" content="2024-12-26T14:11:00.000Z">
<meta property="article:modified_time" content="2025-04-15T13:09:29.662Z">
<meta property="article:author" content="Crayz">
<meta property="article:tag" content="计算机网络">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://crayz-l.github.io/img/avator.jpg"><link rel="shortcut icon" href="/img/home.png"><link rel="canonical" href="http://crayz-l.github.io/posts/4240988082/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":true},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '计网Chapter4',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  isShuoshuo: false
}</script><link rel="stylesheet" href="/css/modify.css"><meta name="generator" content="Hexo 7.3.0"><link href="https://cdn.bootcss.com/KaTeX/0.11.1/katex.min.css" rel="stylesheet" /></head><body><div id="web_bg" style="background-image: url(/img/background.jpg);"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/avator.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">70</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">5</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">2</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">Crayz's Blog</span></a><a class="nav-page-title" href="/"><span class="site-name">计网Chapter4</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">计网Chapter4</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-12-26T14:11:00.000Z" title="发表于 2024-12-26 22:11:00">2024-12-26</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-04-15T13:09:29.662Z" title="更新于 2025-04-15 21:09:29">2025-04-15</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">5.2k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>17分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><div class="top-img gist" style="background-image: url(/false)"></div><article class="container post-content" id="article-container"><h2 id="1-网络层概述">1.网络层概述</h2>
<p>主要任务：实现网络互连，实现数据包在各网络间的传输<br>
需要解决的主要问题：</p>
<ol>
<li>网络层向运输层提供怎样的服务（“可靠传输” or “不可靠传输”）</li>
<li>网络层寻址问题</li>
<li>路由选择问题</li>
</ol>
<p>Internet 使用TCP/IP协议栈，且在网络层中常使用网际协议IP，故又称网络层为网际层<br>
<img src="https://raw.githubusercontent.com/crayz-l/Learning_picgo/main/img/%E8%AE%A1%E7%BD%91chapter4.1-1" alt="image.png"></p>
<h2 id="2-网络层提供的两种服务">2.网络层提供的两种服务</h2>
<h3 id="2-1-面向连接的虚电路服务">2.1 面向连接的虚电路服务</h3>
<p>可靠通信由网络保证，故必须建立<strong>网络层的连接——虚电路VC</strong>（Virtual Circuit）<br>
通信双方沿着已建立的虚电路发送分组，除首次发送外，之后每次发送分组的首部只需添加虚电路的编号即可完成通信，通信结束后需要释放虚电路</p>
<h3 id="2-2-无连接的数据报服务">2.2 无连接的数据报服务</h3>
<p>可靠通信由用户主机保证<br>
不需要建立网络层连接，每个分组可走不同路径，且分组首部必须携带目的主机的完整地址。<br>
容易出现分组丢失，误码，失序等现象。</p>
<h2 id="3-ipv4地址">3. IPv4地址</h2>
<h3 id="3-1-概述">3.1 概述</h3>
<p>IPv4地址：每一台主机（或路由器）的每一个接口在全世界范围内的唯一的32比特的标识符<br>
采用<strong>点分十进制表示方法</strong>：32比特按8个一组进行划分，每组转换为十进制数，以点 <strong>.</strong> 相连</p>
<p>重点：二进制和十进制的相互转换<br>
二进制-&gt;十进制：8位二进制数与对应位的权值相乘的和<br>
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi><mi>e</mi><mi>s</mi><mi>u</mi><mi>l</mi><mi>t</mi><mo>=</mo><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mn>7</mn></msubsup><msup><mn>2</mn><mrow><mi>i</mi><mo>−</mo><mn>1</mn></mrow></msup><mo>∗</mo><mi>n</mi><mi>u</mi><msub><mi>m</mi><mi>i</mi></msub><mo separator="true">,</mo><mi>n</mi><mi>u</mi><msub><mi>m</mi><mi>i</mi></msub><mtext>是从右边第一位开始，每一位的值</mtext></mrow><annotation encoding="application/x-tex">result=\sum_{i=1}^{7}2^{i-1}*num_i,num_i是从右边第一位开始，每一位的值</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">e</span><span class="mord mathdefault">s</span><span class="mord mathdefault">u</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.253718em;vertical-align:-0.29971000000000003em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.954008em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">7</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.29971000000000003em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.824664em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">n</span><span class="mord mathdefault">u</span><span class="mord"><span class="mord mathdefault">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">n</span><span class="mord mathdefault">u</span><span class="mord"><span class="mord mathdefault">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord cjk_fallback">是</span><span class="mord cjk_fallback">从</span><span class="mord cjk_fallback">右</span><span class="mord cjk_fallback">边</span><span class="mord cjk_fallback">第</span><span class="mord cjk_fallback">一</span><span class="mord cjk_fallback">位</span><span class="mord cjk_fallback">开</span><span class="mord cjk_fallback">始</span><span class="mord cjk_fallback">，</span><span class="mord cjk_fallback">每</span><span class="mord cjk_fallback">一</span><span class="mord cjk_fallback">位</span><span class="mord cjk_fallback">的</span><span class="mord cjk_fallback">值</span></span></span></span><br>
如：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mn>10101010</mn><msub><mo stretchy="false">)</mo><mn>2</mn></msub><mo>=</mo><mo stretchy="false">(</mo><mn>1</mn><mo>∗</mo><msup><mn>2</mn><mn>7</mn></msup><mo>+</mo><mn>0</mn><mo>∗</mo><msup><mn>2</mn><mn>6</mn></msup><mo>+</mo><mn>1</mn><mo>∗</mo><msup><mn>2</mn><mn>5</mn></msup><mo>+</mo><mn>0</mn><mo>∗</mo><msup><mn>2</mn><mn>4</mn></msup><mo>+</mo><mn>1</mn><mo>∗</mo><msup><mn>2</mn><mn>3</mn></msup><mo>+</mo><mn>0</mn><mo>∗</mo><msup><mn>2</mn><mn>2</mn></msup><mo>+</mo><mn>1</mn><mo>∗</mo><msup><mn>2</mn><mn>1</mn></msup><mo>+</mo><mn>0</mn><mo>∗</mo><msup><mn>2</mn><mn>0</mn></msup><msub><mo stretchy="false">)</mo><mn>10</mn></msub></mrow><annotation encoding="application/x-tex">(10101010)_2=(1*2^7+0*2^6+1*2^5+0*2^4+1*2^3+0*2^2+1*2^1+0*2^0)_{10}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mord">0</span><span class="mord">1</span><span class="mord">0</span><span class="mord">1</span><span class="mord">0</span><span class="mord">1</span><span class="mord">0</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">7</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">6</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">5</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>  下标分别表示n进制</p>
<p>十进制-&gt;二进制：除2取余法<br>
对一个十进制数不断除2，记录每一次除法的余数，最后一项除法余数作为二进制数的首位，自下而上组成一个二进制数<br>
对于<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mn>130</mn><msub><mo stretchy="false">)</mo><mn>10</mn></msub><mo>=</mo><mo stretchy="false">(</mo><mn>10000010</mn><msub><mo stretchy="false">)</mo><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">(130)_{10}=(10000010)_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mord">3</span><span class="mord">0</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">1</span><span class="mord">0</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>有：</p>
<table>
<thead>
<tr>
<th style="text-align:center">除式</th>
<th style="text-align:center">余数</th>
<th>位置关系</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">130/2=65</td>
<td style="text-align:center">0</td>
<td>末位</td>
</tr>
<tr>
<td style="text-align:center">65/2=32</td>
<td style="text-align:center">1</td>
<td></td>
</tr>
<tr>
<td style="text-align:center">32/2=16</td>
<td style="text-align:center">0</td>
<td></td>
</tr>
<tr>
<td style="text-align:center">16/2=8</td>
<td style="text-align:center">0</td>
<td></td>
</tr>
<tr>
<td style="text-align:center">8/2=4</td>
<td style="text-align:center">0</td>
<td></td>
</tr>
<tr>
<td style="text-align:center">4/2=2</td>
<td style="text-align:center">0</td>
<td></td>
</tr>
<tr>
<td style="text-align:center">2/2=1</td>
<td style="text-align:center">0</td>
<td></td>
</tr>
<tr>
<td style="text-align:center">1/2=0</td>
<td style="text-align:center">1</td>
<td>首位</td>
</tr>
</tbody>
</table>
<h3 id="3-2-分类编址的ipv4地址">3.2 分类编址的IPv4地址</h3>
<p><img src="https://raw.githubusercontent.com/crayz-l/Learning_picgo/main/img/%E8%AE%A1%E7%BD%91chapter4.3-1" alt="image.png"><br>
<img src="https://raw.githubusercontent.com/crayz-l/Learning_picgo/main/img/%E8%AE%A1%E7%BD%91chapter4.3-2" alt="image.png"></p>
<h4 id="a类地址">A类地址</h4>
<p>最高位固定为0 ，即0xxxxxxx<br>
最小网络号0，不可指派；<br>
可指派的最小网络号为1，即00000001，其网络地址为1.0.0.0<br>
最大网络号127，本地环回测试地址，不可指派<br>
则可指派网络数为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mrow><mo stretchy="false">(</mo><mn>8</mn><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo></mrow></msup><mo>−</mo><mn>2</mn><mo>=</mo><mn>126</mn></mrow><annotation encoding="application/x-tex">2^{(8-1)}-2=126</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9713299999999999em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8879999999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mtight">8</span><span class="mbin mtight">−</span><span class="mord mtight">1</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">2</span><span class="mord">6</span></span></span></span><br>
网络中的最大主机数：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>24</mn></msup><mo>−</mo><mn>2</mn><mo>=</mo><mn>16777214</mn></mrow><annotation encoding="application/x-tex">2^{24}-2=16777214</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mtight">4</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">6</span><span class="mord">7</span><span class="mord">7</span><span class="mord">7</span><span class="mord">2</span><span class="mord">1</span><span class="mord">4</span></span></span></span></p>
<h4 id="b类地址">B类地址</h4>
<p>最高两位固定为10，即10xxx……xxx<br>
最小网络号：128.0，网络地址：128.0.0.0<br>
最大网络号：191.255，网络地址：191.255.0.0<br>
则可指派网络号为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mrow><mo stretchy="false">(</mo><mn>16</mn><mo>−</mo><mn>2</mn><mo stretchy="false">)</mo></mrow></msup><mo>=</mo><mn>16384</mn></mrow><annotation encoding="application/x-tex">2^{(16-2)}=16384</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8879999999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8879999999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mtight">1</span><span class="mord mtight">6</span><span class="mbin mtight">−</span><span class="mord mtight">2</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">6</span><span class="mord">3</span><span class="mord">8</span><span class="mord">4</span></span></span></span><br>
网络中的最大主机数：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>16</mn></msup><mo>−</mo><mn>2</mn><mo>=</mo><mn>65534</mn></mrow><annotation encoding="application/x-tex">2^{16}-2=65534</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">6</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">6</span><span class="mord">5</span><span class="mord">5</span><span class="mord">3</span><span class="mord">4</span></span></span></span></p>
<h4 id="c类地址">C类地址</h4>
<p>最高三位固定为110，即110xx……xxx<br>
最小网络号：192.0.0，网络地址：192.0.0.0.0<br>
最大网络号：223.255.255，网络地址：223.255.255.0<br>
可指派的网络数为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mrow><mo stretchy="false">(</mo><mn>24</mn><mo>−</mo><mn>3</mn><mo stretchy="false">)</mo></mrow></msup><mo>=</mo><mn>2097152</mn></mrow><annotation encoding="application/x-tex">2^{(24-3)}=2097152</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8879999999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8879999999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mtight">2</span><span class="mord mtight">4</span><span class="mbin mtight">−</span><span class="mord mtight">3</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">0</span><span class="mord">9</span><span class="mord">7</span><span class="mord">1</span><span class="mord">5</span><span class="mord">2</span></span></span></span><br>
网络中的最大主机数：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>8</mn></msup><mo>−</mo><mn>2</mn><mo>=</mo><mn>254</mn></mrow><annotation encoding="application/x-tex">2^8-2=254</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">8</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">5</span><span class="mord">4</span></span></span></span></p>
<h3 id="3-3-划分子网的ipv4地址">3.3 划分子网的IPv4地址</h3>
<p>出现原因：网络需求的增加，但新增网络申请新网络号会有如下弊端<br>
1. 需要等待时间和花费更多费用<br>
2. 会增加其他路由器中路由表记录的数量<br>
3. 浪费原有网络号中剩余的大量IP地址<br>
故产生从主机号中借用一部分比特作为子网号<br>
如何判断网络地址或主机IP地址中的子网号部分：使用子网掩码</p>
<p>32比特的子网掩码可表明分类IP地址的主机号部分被借用了几个比特作为子网号</p>
<ol>
<li><strong>连续的1对应网络号和子网号</strong></li>
<li><strong>连续的0对应主机号</strong></li>
<li>划分子网的IPv4地址与子网掩码按位<strong>逻辑与运算</strong>，可得到<strong>所在子网的网络地址</strong><br>
做题思路：
<ol>
<li>判断IP地址属于哪一个类别（A,B or C），从而可以知道前8/16/24位是网络号</li>
<li>而后针对不是255的部分进行二进制转换，可以知道子网号占几个比特</li>
<li>逻辑与运算后，网络号，子网号不变，其他部分转变为0，得出所在子网的网络地址</li>
</ol>
</li>
</ol>
<p>给定一个分类的IP地址和相应的子网掩码，可知子网划分的细节：</p>
<ol>
<li>划分出的子网数量</li>
<li>每个子网可分配的IP数量</li>
<li>每个子网的网络地址和广播地址（得到网络地址后，非网络号，子网号部分全转换为1）</li>
<li>每个子网可分配的最小和最大地址</li>
</ol>
<p>默认子网掩码</p>
<ol>
<li>A类：255.0.0.0</li>
<li>B类：255.255.0.0</li>
<li>C类：255.255.255.0</li>
</ol>
<h3 id="3-4-无分类编址的ipv4地址">3.4 无分类编址的IPv4地址</h3>
<p>数量巨大的C类网地址空间太小且没得到充分使用，IPv4地址空间面临全部耗尽的威胁<br>
1993年IETF 发布<strong>无分类域间路由选择CIDR</strong></p>
<p>方法：斜线记法/CIDR记法<br>
在IPv4地址后加上“/”+网络前缀所占比特数，将网络前缀相同的连续的IP地址组成一个“CIDR地址块”</p>
<p>已知CIDR地址块中的任一地址，即可知道该地址块的全部细节：</p>
<ul>
<li>最小，最大地址</li>
<li>地址块中的地址数量</li>
<li>聚合某类网络的数量</li>
<li>子网掩码</li>
<li>示例：请给出128.14.35.7/20的全部细节（最小，最大地址，地址数量，聚合C类网数量，子网掩码）<br>
由于网络前缀为20，则可忽略128.14，对35.7进行二进制转换<br>
有00100011.00000111，可由20-16知前4位仍是网络前缀<br>
则得出128.14.32.0为最小地址，128.14.47.255为最大地址（将网络前缀以后的比特置1）<br>
地址数量：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mrow><mo stretchy="false">(</mo><mn>32</mn><mo>−</mo><mn>20</mn><mo stretchy="false">)</mo></mrow></msup></mrow><annotation encoding="application/x-tex">2^{(32-20)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8879999999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8879999999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mtight">3</span><span class="mord mtight">2</span><span class="mbin mtight">−</span><span class="mord mtight">2</span><span class="mord mtight">0</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span></span></span></span> ；聚合C类网的数量：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mrow><mo stretchy="false">(</mo><mn>32</mn><mo>−</mo><mn>20</mn><mo stretchy="false">)</mo></mrow></msup><mi mathvariant="normal">/</mi><msup><mn>2</mn><mn>8</mn></msup><mo stretchy="false">(</mo><mtext>除</mtext><msup><mn>2</mn><mn>8</mn></msup><mtext>是因为一个</mtext><mi>C</mi><mtext>类网络号有</mtext><msup><mn>2</mn><mn>8</mn></msup><mtext>个地址）</mtext></mrow><annotation encoding="application/x-tex">2^{(32-20)}/2^8(除2^8是因为一个C类网络号有2^8个地址）</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.138em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8879999999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mtight">3</span><span class="mord mtight">2</span><span class="mbin mtight">−</span><span class="mord mtight">2</span><span class="mord mtight">0</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span><span class="mord">/</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">8</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord cjk_fallback">除</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">8</span></span></span></span></span></span></span></span><span class="mord cjk_fallback">是</span><span class="mord cjk_fallback">因</span><span class="mord cjk_fallback">为</span><span class="mord cjk_fallback">一</span><span class="mord cjk_fallback">个</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord cjk_fallback">类</span><span class="mord cjk_fallback">网</span><span class="mord cjk_fallback">络</span><span class="mord cjk_fallback">号</span><span class="mord cjk_fallback">有</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">8</span></span></span></span></span></span></span></span><span class="mord cjk_fallback">个</span><span class="mord cjk_fallback">地</span><span class="mord cjk_fallback">址</span><span class="mord cjk_fallback">）</span></span></span></span><br>
子网掩码：11111111.11111111.11110000.0000000</li>
</ul>
<p>路由聚合：找共同前缀</p>
<ul>
<li>示例：某路由表中有转发接口相同的4条路由表项，其目的网络地址分别为35.230.32.0/21，35.230.40.0/21，35.230.48.0/21和35.230.56.0/21，4条路由聚合后的目的网络地址：
<ol>
<li>已知4条路由的共同前缀为35.230，对后两个字节进行二进制转换
<ol>
<li>32.0:00100000.00000000</li>
<li>40.0:00101000.00000000</li>
<li>48.0:00110000.00000000</li>
<li>56.0:00111000.00000000</li>
</ol>
</li>
<li>通过比较四个比特串可知在第三个字节，001为四个比特串的共同前缀</li>
<li>所以聚合后的目的网络地址为35.230.00100000.00000000，即35.230.32.0/19</li>
</ol>
</li>
</ul>
<p>网络前缀越长，地址块越小，路由越具体<br>
<strong>最长前缀匹配</strong>：路由器查表转发分组时有多条路由可选，则选前缀最长的<br>
<em><strong>计算主机数记得减去网络地址和广播地址</strong></em></p>
<h3 id="3-5-ipv4的应用规划">3.5 IPv4的应用规划</h3>
<ul>
<li>定长的子网掩码FLSM（对应3.3）
<ul>
<li>使用同一个子网掩码划分子网</li>
<li>只能划分出<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">2^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.664392em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span></span></span>个子网（n是从主机号部分借用作为网络号的比特数量）</li>
<li>分配的IP地址数量相同，容易造成浪费</li>
</ul>
</li>
<li>变成的子网掩码VLSM（对应3.4）
<ul>
<li>使用不同的子网掩码进行划分</li>
<li>可按需分配</li>
<li>分配IP地址数量不同，尽可能减少对IP地址的浪费</li>
</ul>
</li>
</ul>
<h2 id="4-ip数据报的发送和转发">4.IP数据报的发送和转发</h2>
<ul>
<li>主机发送IP数据报
<ul>
<li>判断目的主机是否与自己处于同一网络
<ul>
<li>判断方法：将源主机和目的主机的IP地址与子网掩码相与，判断是否相等</li>
<li>若在，则直接交付</li>
<li>若不在，传输给主机所在网络的<strong>默认网关（路由器）</strong>，由默认网关帮忙转发</li>
</ul>
</li>
</ul>
</li>
<li>路由器转发IP数据报
<ol>
<li>检查IP数据报首部是否出错：
<ol>
<li>若出错，则直接丢弃该IP数据报并通告源主机</li>
<li>若没有出错则转发</li>
</ol>
</li>
<li>根据IP数据报的目的地址在路由表中查找匹配的条目<br>
查找方法：IP数据报首部中包含的目的地址与路由表中的子网掩码相与，判断结果是否等于相应的目的网络地址
<ol>
<li>若找到，则转发给条目中指示下一跳</li>
<li>若找不到，则丢弃该IP数据报并通告源主机</li>
</ol>
</li>
</ol>
</li>
</ul>
<h2 id="5-静态路由配置及可能产生的路由环路问题">5.静态路由配置及可能产生的路由环路问题</h2>
<p>概念：用户或网络管理员给路由器<strong>人工配置路由表</strong><br>
可能引发路由环路的错误：</p>
<ol>
<li>配置错误<br>
<img src="https://raw.githubusercontent.com/crayz-l/Learning_picgo/main/img/%E8%AE%A1%E7%BD%91chapter4.5-1" alt="image.png"></li>
<li>聚合了不存在的网络<br>
<img src="https://raw.githubusercontent.com/crayz-l/Learning_picgo/main/img/%E8%AE%A1%E7%BD%91chapter4.5-2" alt="image.png"></li>
<li>网络故障<br>
<img src="https://raw.githubusercontent.com/crayz-l/Learning_picgo/main/img/%E8%AE%A1%E7%BD%91chapter4.5-3" alt="image.png"></li>
<li>生存时间TTL，IP数据报进入路由器后，TTL-1次，若TTL!=0，路由器则继续转发</li>
</ol>
<p>路由条目 的类型：</p>
<ol>
<li>直连网络</li>
<li>静态路由（人工配置）<br>
特殊的静态路由条目：
<ol>
<li>默认路由（目的网络为0.0.0.0，子网掩码为0.0.0.0）</li>
<li>特定主机路由（目的网络为特定主机的IP地址，子网掩码为255.255.255.255）</li>
<li>黑洞路由（下一跳为null0）</li>
</ol>
</li>
<li>动态路由（路由选择协议）</li>
</ol>
<h2 id="6-路由选择协议">6.路由选择协议</h2>
<h3 id="6-1-概述">6.1 概述</h3>
<p>Internet采用的路由选择协议的特点</p>
<ol>
<li>自适应：能较好适应网络状态变化</li>
<li>分布式：路由器之间交换路由信息</li>
<li>分层次：Internet被划分为较小的自治系统AS<br>
<img src="https://raw.githubusercontent.com/crayz-l/Learning_picgo/main/img/%E8%AE%A1%E7%BD%91chapter4.6-1" alt="image.png"><br>
常见的路由选择协议<br>
<img src="https://raw.githubusercontent.com/crayz-l/Learning_picgo/main/img/%E8%AE%A1%E7%BD%91chapter4.6-2" alt="image.png"></li>
</ol>
<p>路由器的基本结构<br>
<img src="https://raw.githubusercontent.com/crayz-l/Learning_picgo/main/img/%E8%AE%A1%E7%BD%91chapter4.6-3" alt="image.png"></p>
<h3 id="6-2-路由信息协议rip的基本工作原理">6.2 路由信息协议RIP的基本工作原理</h3>
<p>封装协议：UDP（端口号：520，协议字段：17）<br>
RIP用跳数衡量到达目的网络的距离<br>
1. 路由器到直连网络的距离定义为1<br>
2. 到非直连网络的距离定义为所经过路由器数+1<br>
3. “距离”=16时为不可达<br>
4. <strong>好路由 == 经过路由数量最少的路由</strong><br>
5. 到达同一目的网络有多条“距离相等”的路由，可进行等价负载均衡</p>
<p>RIP的工作要点：</p>
<ol>
<li>和谁交换信息：仅和相邻路由器交换信息，即中间没有其他路由器</li>
<li>交换什么信息：路由器记录的路由表</li>
<li>何时交换信息：周期性交换</li>
</ol>
<p>RIP的基本工作过程</p>
<ol>
<li>路由器刚开始只知道自己到直连网络的距离为1</li>
<li>每个路由器和相邻路由器周期性交换并更新路由信息</li>
<li>若干次交换和更新后，每个路由器都知道到达本AS内各网络的最短距离和下一跳地址，称为收敛</li>
</ol>
<p><em><strong>RIP路由条目更新规则</strong></em></p>
<ul>
<li>发现新网络，添加</li>
<li>到达目的网络，相同下一跳，最新消息，更新</li>
<li>到达目的网络，不同下一跳，新路由有优势，更新</li>
<li>到达目的网络，不同下一跳，等价负载均衡，更新</li>
<li>到达目的网络，不同下一跳，新路由劣势，不更新</li>
</ul>
<p>RIP存在“坏消息传播得慢”问题<br>
又称路由环路or距离无穷计数<br>
解决方法：<br>
1. 限制最大路径距离为15<br>
2. 实现路由表变化即发送更新报文（“触发更新”）<br>
3. 让路由器记录收到某特定路由信息的接口，而不让同一路由信息再通过此接口向反方向传送</p>
<h3 id="6-3-开放最短路径优先ospf的基本工作原理">6.3 开放最短路径优先OSPF的基本工作原理</h3>
<p>封装协议：IP（协议字段：89）<br>
特点：</p>
<ol>
<li>基于链路状态
<ol>
<li>链路状态：本路由器和<strong>哪些路由器相邻</strong>，及相应<strong>链路的“代价”</strong></li>
</ol>
</li>
<li>使用SPF算法（最短路径优先），不会产生环路</li>
<li>不限制网络规模，收敛速度快</li>
</ol>
<p>工作流程：</p>
<ol>
<li>使用OSPF的路由器会产生<strong>链路状态通告LSA</strong><br>
内容包括：<br>
1.直连网络的链路状态信息；<br>
2.邻居路由器的链路状态信息。</li>
<li>LSA被封装在<strong>链路状态更新分组LSU</strong>中，洪泛发送</li>
<li>路由器有一个<strong>链路状态数据库LSDB</strong>，用于存储LSA</li>
<li>通过各路由器洪泛发送，所有的LSDB最终归于一致</li>
<li>各路由器基于LSDB进行最短路径优先计算，从而构建出到达其他路由的最短路径和路由表</li>
</ol>
<p>OSPF的分组类型：</p>
<ol>
<li>问候分组</li>
<li>数据库描述分组</li>
<li>链路状态请求分组</li>
<li>链路状态更新分组</li>
<li>链路状态确认组分</li>
</ol>
<p>OSPF在多点接入网络中路由器邻居关系的建立：</p>
<ol>
<li>选举指定路由器DR和备用指定路由器BDR</li>
<li>所有非DR/BDR只与DR/BDR建立邻居关系</li>
<li>非DR/BDR之间通过DR/BDR交换信息<br>
<img src="https://raw.githubusercontent.com/crayz-l/Learning_picgo/main/img/%E8%AE%A1%E7%BD%91chapter4.6-4" alt="image.png"></li>
</ol>
<p>为了使OSPF能用于规模很大的网络，OSPF将一个AS划分若干更小范围，称<strong>区域（Area)</strong><br>
优点：利用洪泛发交换链路状态信息的范围局限于每一个区域而不是一个AS<br>
<img src="https://raw.githubusercontent.com/crayz-l/Learning_picgo/main/img/%E8%AE%A1%E7%BD%91chapter4.6-5" alt="image.png"></p>
<h3 id="6-4-边界网关协议bgp的基本工作原理">6.4 边界网关协议BGP的基本工作原理</h3>
<p>封装协议：TCP （端口号：179，协议字段：6）<br>
产生的原因：</p>
<ol>
<li>不同AS之间，度量路由的“代价”不同，不利于最佳路由的寻找</li>
<li>AS间的路由选择需要考虑相关策略（政治，经济，安全）<br>
BGP力求寻找一条能到达目的网络且较好的路由，而非最佳路由</li>
</ol>
<p>工作原理：</p>
<ol>
<li>配置BGP时，AS的管理员需要设置一台路由器作为“BGP发言人”</li>
<li>不同AS的BGP发言人交换信息时需要建立TCP连接，端口号179：
<ol>
<li>在TCP连接基础上发送BGP报文以建立BGP会话</li>
<li>利用BGP会话交换路由信息（如：新增路由，撤销路由，报错信息）</li>
<li>使用TCP连接交换路由信息的两个BGP发言人称为对方的邻站or对等站</li>
</ol>
</li>
<li>BGP发言人除了运行BGP，还得运行AS中的内部网关协议</li>
<li>BGP发言人交换网络可达性的信息</li>
<li>信息交换完毕后，BGP发言人可根据采用的策略找出到达各AS较好的路由，即构造出树形结构，不存在回路的AS连通图</li>
</ol>
<p>BGP适用于多级结构的Internet<br>
BGP-4的报文类型：</p>
<ol>
<li>OPEN报文：用来与相邻的BGP发言人建立关系，初始化通信</li>
<li>UPDATE报文：通告某一路由信息及列出要撤销的多条路由</li>
<li>KEEPALIVE（保活）报文：周期性验证邻站的连通性</li>
<li>NOTIFICATION（通知）报文：发送检测到的差错</li>
</ol>
<h2 id="7-ipv4数据报的首部格式">7. IPv4数据报的首部格式</h2>
<p><img src="https://raw.githubusercontent.com/crayz-l/Learning_picgo/main/img/%E8%AE%A1%E7%BD%91chapter4.7-1" alt="image.png"></p>
<ol>
<li>版本：占4比特，表示IP协议的版本，传输双方所使用版本要一致</li>
<li>首部长度：占4比特，表示IP数据报首部的长度，取值以4字节为单位
<ol>
<li>最小十进制取值为5，表示首部只有20字节固定部分</li>
<li>最大十进制取值为15，表示首部有20字节固定部分和40字节可变部分</li>
</ol>
</li>
<li>可选字段：长度从1个字节到40个字节不等，用来支持排错，测量及安全等错失
<ol>
<li>增加了IP数据报的功能，使首部长度成为可变的，增加开销</li>
</ol>
</li>
<li>填充字段：确保首部长度为4字节的整数值，使用全0填充</li>
<li>区分服务：占8比特</li>
<li>总长度：占16比特，表示数据报的总长度（首部+数据载荷），最大取值为65535字节</li>
<li>标识：16比特，同一数据报的分片标识相同</li>
<li>标志：3比特
<ol>
<li>DF位：1表示不许分片，0表示可分片</li>
<li>MF位：1表示“后面还有分片”，0表示“最后一个分片”</li>
<li>保留位：必须为0</li>
</ol>
</li>
<li>片偏移：占13比特，指出分片数据报的数据载荷部分偏移其在原数据报的位置有多少个单位。单位：8字节
<ol>
<li>一般片偏移量等于 比特/8 (字节)</li>
</ol>
</li>
<li>TTL：占8比特，以跳数为单位，每经过一个路由，TTL-1</li>
<li>协议：占8比特，指明IP数据报的数据载荷是什么协议数据单元
<ul>
<li>各协议的协议字段：</li>
<li>ICMP：1；IGMP：2；TCP：6；UDP：17；IPv6：41；OSPF：89</li>
</ul>
</li>
<li>首部检验和：占16比特，用来检测首部传输过程中是否出现差错
<ol>
<li>每经过一次路由器要重新计算一次，因为TTL，标志，片偏移等可能发生变化</li>
</ol>
</li>
<li>源IP地址和目的IP地址：各占32比特</li>
</ol>
<h2 id="8-网际控制报文协议icmp">8.网际控制报文协议ICMP</h2>
<p>为更有效控制转发IP数据报和提高交付成功的机会，在网际层使用网际控制报文协议<br>
主机或路由器使用ICMP来发送<strong>差错报告报文</strong>和<strong>询问报文</strong><br>
ICMP差错报告报文的类型：<br>
1. 终点不可达<br>
路由器或主机不能交付数据报时发送，可细分为目的网络不可达、目的主机不可达、目的协议不可达、目的端口不可达等等<br>
2. 源点抑制<br>
路由器或主机因拥塞而丢弃数据报时发送<br>
3. 时间超过<br>
数据报还未发送到目的主机，TTL就为0时发送<br>
在预先规定的时间没有收到一个数据报的全部数据报片<br>
4. 参数问题<br>
路由器或目的主机收到的IP数据报根据首部检验和字段发现首部出现误码<br>
5. 改变路由（重定向）<br>
路由器将改变路由报文发送给主机，让主机知道下次应发送数据报给最佳路由<br>
ICMP询问报文的类型：<br>
1. 回送请求和回答<br>
测试目的站是否可达<br>
2. 时间戳请求和回答<br>
进行时间同步和测量时间</p>
<p>ICMP报文被封装到IP数据报发送</p>
<p>不应发送ICMP差错报告报文的情况</p>
<ol>
<li>对ICMP差错报告报文</li>
<li>对第一个分片的数据报片的所有后续数据报片</li>
<li>对具有多播地址的数据报</li>
<li>对具有特殊地址（如127.0.0.0 or 0.0.0.0）的数据报</li>
</ol>
<p>ICMP的应用：</p>
<ol>
<li>分组网间探测PING</li>
<li>跟踪路由traceroute</li>
</ol>
<h2 id="9-虚拟专用网vpn和网络地址转换nat">9.虚拟专用网VPN和网络地址转换NAT</h2>
<h3 id="9-1-虚拟专用网vpn">9.1 虚拟专用网VPN</h3>
<p>概念：利用公用的Internet作为本机构各专用网间的通信载体，这样的专用网又称虚拟专用网<br>
类型：</p>
<ol>
<li>内联网VPN：同一机构不同部门的内部网络构成的VPN</li>
<li>外联网VPN：有外部机构参与的VPN</li>
<li>远程接入VPN：在外地通过VPN软件访问公司主机<br>
VPN为保证传输的安全性，会对内部数据进行加密</li>
</ol>
<h3 id="9-2-网络地址转换nat">9.2 网络地址转换NAT</h3>
<p>因为IP地址紧缺，故虚拟专用网中各主机所分配的地址应是本机构可自由分配的私有地址<br>
<img src="https://raw.githubusercontent.com/crayz-l/Learning_picgo/main/img/%E8%AE%A1%E7%BD%91chapter4.9-1" alt="image.png"><br>
NAT：将大量使用内部专用地址的专用网络用户共享少量外部全球地址<br>
即使用内部网络想访问公用Internet上的主机时，主机的内部IP地址经过NAT路由器的转换，会被临时赋予一个全球地址，此时源IP地址发生改变<br>
NAPT：网络地址与端口号转换<br>
因为绝大多数网络应用采用TCP/UDP传送，可利用运输层端口号和IP地址一起转换，这样，一个全球IP地址可使多个拥有本地地址的主机同时和Internet上的主机通信</p>
<p>对于一些P2P应用，需要外网主机主动与内网主机通信，此时需要特殊的NAT穿越技术帮忙<br>
NAT对外网屏蔽了内网主机的网络地址，提供一定的安全保护</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="http://crayz-l.github.io">Crayz</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://crayz-l.github.io/posts/4240988082/">http://crayz-l.github.io/posts/4240988082/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="http://crayz-l.github.io" target="_blank">Crayz's Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a></div><div class="post-share"><div class="social-share" data-image="/img/avator.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/posts/2345625380/" title="计网Chapter5"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">计网Chapter5</div></div><div class="info-2"><div class="info-item-1">...</div></div></div></a><a class="pagination-related" href="/posts/1655489041/" title="计网Chapter3"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">计网Chapter3</div></div><div class="info-2"><div class="info-item-1">1.数据链路层的概述 链路：一个结点到相邻结点的一段物理线路，中间无其他交换结点 数据链路：指把实现通信协议的硬件和软件加到链路上，构成数据链路 数据链路层的单位：帧 2.封装成帧 定义：指数据链路层给上层交付的协议数据单元添加帧头和帧尾使之成为帧 1.帧头，帧尾含有重要的控制信息 2.帧头，帧尾的作用之一是帧定界 3.帧间间隔：96比特时间 透明传输：指数据链路层对上层交付的传输数据无限制 1.面向字节的物理链路使用字节填充实现透明传输 在跟帧定界相同的数据前加上转义字符(十进制值为27,占1字节 ) 2.面向比特的物理链路使用比特填充实现透明传输 零比特填充：面对连续的5个1后面填充一个0 提高帧的传输效率，应使帧的数据部分长度尽可能大些 最大传送单元MTU：数据链路层协议规定的帧的数据部分的长度上限...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/posts/222697760/" title="计网实验报告"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-04-15</div><div class="info-item-2">计网实验报告</div></div><div class="info-2"><div class="info-item-1">资料下载请点此处 推荐网课：计算机网络微课堂（有字幕无背景音乐版）_哔哩哔哩_bilibili </div></div></div></a><a class="pagination-related" href="/posts/314979998/" title="计网Chapter6"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-12-27</div><div class="info-item-2">计网Chapter6</div></div><div class="info-2"><div class="info-item-1">1.应用层概述 应用层：计算机网络体系结构的最顶层，设计和建立计算机网络的最终目的 1. 早期基于文本的应用：电子邮件，远程登录，文件传输，新闻组 2. 20世纪90年代出现的万维网WWW 3. 即时通信，P2P文件共享及音视频应用 2.客户-服务器方式（C/S方式）和对等方式（P2P方式） 开发一种新的网络应用首先应考虑的是网络应用程序在各种端系统上的组织方式和它们之间的关系 2.1...</div></div></div></a><a class="pagination-related" href="/posts/2345625380/" title="计网Chapter5"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-12-27</div><div class="info-item-2">计网Chapter5</div></div><div class="info-2"><div class="info-item-1">...</div></div></div></a><a class="pagination-related" href="/posts/1655489041/" title="计网Chapter3"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-11-01</div><div class="info-item-2">计网Chapter3</div></div><div class="info-2"><div class="info-item-1">1.数据链路层的概述 链路：一个结点到相邻结点的一段物理线路，中间无其他交换结点 数据链路：指把实现通信协议的硬件和软件加到链路上，构成数据链路 数据链路层的单位：帧 2.封装成帧 定义：指数据链路层给上层交付的协议数据单元添加帧头和帧尾使之成为帧 1.帧头，帧尾含有重要的控制信息 2.帧头，帧尾的作用之一是帧定界 3.帧间间隔：96比特时间 透明传输：指数据链路层对上层交付的传输数据无限制 1.面向字节的物理链路使用字节填充实现透明传输 在跟帧定界相同的数据前加上转义字符(十进制值为27,占1字节 ) 2.面向比特的物理链路使用比特填充实现透明传输 零比特填充：面对连续的5个1后面填充一个0 提高帧的传输效率，应使帧的数据部分长度尽可能大些 最大传送单元MTU：数据链路层协议规定的帧的数据部分的长度上限...</div></div></div></a><a class="pagination-related" href="/posts/363590279/" title="计网Chapter2"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-10-30</div><div class="info-item-2">计网Chapter2</div></div><div class="info-2"><div class="info-item-1">1.物理层的基本概念 物理层考虑的是怎样才能在连接各种计算机的传输媒体上传输数据比特流  2.传输媒体  导引型传输媒体  双绞线 同轴电缆 光纤   非导引型传输媒体  微波通信（2~40GHz）：2.4GHz的WIFI    3.编码与调制 码元：在使用时间域的波形表示数字信号时，代表不同离散数值的基本波形  4.信道的极限容量 奈氏准则：在假定的理想条件下，为了避免码间串扰，码元传输速率是有上限的 理想低通信道的最高码元传输速率 = 2W Baud = 2W 码元/秒 理想带通信道的最高码元传输速率 = W Baud = W 码元/秒 调制速度=码元传输速度 数据传输速率=波特率∗每个码元所携带的信息量数据传输速率 =...</div></div></div></a><a class="pagination-related" href="/posts/2296455701/" title="计网Chapter 1"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-09-18</div><div class="info-item-2">计网Chapter 1</div></div><div class="info-2"><div class="info-item-1">1.2 因特网 概念  网络：由若干结点（Node）和链路（Link）组成 互联网：通过路由将网络连接而成的更大的网络 因特网（Internet）：世界上最大的互连网络  组成：  边缘部分：由所有连接到Internet上的主机组成，由用户直接使用，用于通信和资源共享 核心部分：由大量网络和连接网络的路由器组成，为边缘部分提供服务      1.3...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/avator.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">Crayz</div><div class="author-info-description"></div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">70</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">5</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">2</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E7%BD%91%E7%BB%9C%E5%B1%82%E6%A6%82%E8%BF%B0"><span class="toc-number">1.</span> <span class="toc-text">1.网络层概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E7%BD%91%E7%BB%9C%E5%B1%82%E6%8F%90%E4%BE%9B%E7%9A%84%E4%B8%A4%E7%A7%8D%E6%9C%8D%E5%8A%A1"><span class="toc-number">2.</span> <span class="toc-text">2.网络层提供的两种服务</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E9%9D%A2%E5%90%91%E8%BF%9E%E6%8E%A5%E7%9A%84%E8%99%9A%E7%94%B5%E8%B7%AF%E6%9C%8D%E5%8A%A1"><span class="toc-number">2.1.</span> <span class="toc-text">2.1 面向连接的虚电路服务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E6%97%A0%E8%BF%9E%E6%8E%A5%E7%9A%84%E6%95%B0%E6%8D%AE%E6%8A%A5%E6%9C%8D%E5%8A%A1"><span class="toc-number">2.2.</span> <span class="toc-text">2.2 无连接的数据报服务</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-ipv4%E5%9C%B0%E5%9D%80"><span class="toc-number">3.</span> <span class="toc-text">3. IPv4地址</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E6%A6%82%E8%BF%B0"><span class="toc-number">3.1.</span> <span class="toc-text">3.1 概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E5%88%86%E7%B1%BB%E7%BC%96%E5%9D%80%E7%9A%84ipv4%E5%9C%B0%E5%9D%80"><span class="toc-number">3.2.</span> <span class="toc-text">3.2 分类编址的IPv4地址</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#a%E7%B1%BB%E5%9C%B0%E5%9D%80"><span class="toc-number">3.2.1.</span> <span class="toc-text">A类地址</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#b%E7%B1%BB%E5%9C%B0%E5%9D%80"><span class="toc-number">3.2.2.</span> <span class="toc-text">B类地址</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#c%E7%B1%BB%E5%9C%B0%E5%9D%80"><span class="toc-number">3.2.3.</span> <span class="toc-text">C类地址</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-%E5%88%92%E5%88%86%E5%AD%90%E7%BD%91%E7%9A%84ipv4%E5%9C%B0%E5%9D%80"><span class="toc-number">3.3.</span> <span class="toc-text">3.3 划分子网的IPv4地址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-%E6%97%A0%E5%88%86%E7%B1%BB%E7%BC%96%E5%9D%80%E7%9A%84ipv4%E5%9C%B0%E5%9D%80"><span class="toc-number">3.4.</span> <span class="toc-text">3.4 无分类编址的IPv4地址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-ipv4%E7%9A%84%E5%BA%94%E7%94%A8%E8%A7%84%E5%88%92"><span class="toc-number">3.5.</span> <span class="toc-text">3.5 IPv4的应用规划</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-ip%E6%95%B0%E6%8D%AE%E6%8A%A5%E7%9A%84%E5%8F%91%E9%80%81%E5%92%8C%E8%BD%AC%E5%8F%91"><span class="toc-number">4.</span> <span class="toc-text">4.IP数据报的发送和转发</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1%E9%85%8D%E7%BD%AE%E5%8F%8A%E5%8F%AF%E8%83%BD%E4%BA%A7%E7%94%9F%E7%9A%84%E8%B7%AF%E7%94%B1%E7%8E%AF%E8%B7%AF%E9%97%AE%E9%A2%98"><span class="toc-number">5.</span> <span class="toc-text">5.静态路由配置及可能产生的路由环路问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E5%8D%8F%E8%AE%AE"><span class="toc-number">6.</span> <span class="toc-text">6.路由选择协议</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-%E6%A6%82%E8%BF%B0"><span class="toc-number">6.1.</span> <span class="toc-text">6.1 概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-%E8%B7%AF%E7%94%B1%E4%BF%A1%E6%81%AF%E5%8D%8F%E8%AE%AErip%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-number">6.2.</span> <span class="toc-text">6.2 路由信息协议RIP的基本工作原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-%E5%BC%80%E6%94%BE%E6%9C%80%E7%9F%AD%E8%B7%AF%E5%BE%84%E4%BC%98%E5%85%88ospf%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-number">6.3.</span> <span class="toc-text">6.3 开放最短路径优先OSPF的基本工作原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-%E8%BE%B9%E7%95%8C%E7%BD%91%E5%85%B3%E5%8D%8F%E8%AE%AEbgp%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-number">6.4.</span> <span class="toc-text">6.4 边界网关协议BGP的基本工作原理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-ipv4%E6%95%B0%E6%8D%AE%E6%8A%A5%E7%9A%84%E9%A6%96%E9%83%A8%E6%A0%BC%E5%BC%8F"><span class="toc-number">7.</span> <span class="toc-text">7. IPv4数据报的首部格式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-%E7%BD%91%E9%99%85%E6%8E%A7%E5%88%B6%E6%8A%A5%E6%96%87%E5%8D%8F%E8%AE%AEicmp"><span class="toc-number">8.</span> <span class="toc-text">8.网际控制报文协议ICMP</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-%E8%99%9A%E6%8B%9F%E4%B8%93%E7%94%A8%E7%BD%91vpn%E5%92%8C%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2nat"><span class="toc-number">9.</span> <span class="toc-text">9.虚拟专用网VPN和网络地址转换NAT</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-1-%E8%99%9A%E6%8B%9F%E4%B8%93%E7%94%A8%E7%BD%91vpn"><span class="toc-number">9.1.</span> <span class="toc-text">9.1 虚拟专用网VPN</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2-%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2nat"><span class="toc-number">9.2.</span> <span class="toc-text">9.2 网络地址转换NAT</span></a></li></ol></li></ol></div></div><div class="card-widget card-post-series"><div class="item-headline"><i class="fa-solid fa-layer-group"></i><span>系列文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/222697760/" title="计网实验报告">计网实验报告</a><time datetime="2025-04-15T13:02:00.000Z" title="发表于 2025-04-15 21:02:00">2025-04-15</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/314979998/" title="计网Chapter6">计网Chapter6</a><time datetime="2024-12-27T13:43:00.000Z" title="发表于 2024-12-27 21:43:00">2024-12-27</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/2345625380/" title="计网Chapter5">计网Chapter5</a><time datetime="2024-12-27T05:23:00.000Z" title="发表于 2024-12-27 13:23:00">2024-12-27</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/4240988082/" title="计网Chapter4">计网Chapter4</a><time datetime="2024-12-26T14:11:00.000Z" title="发表于 2024-12-26 22:11:00">2024-12-26</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/1655489041/" title="计网Chapter3">计网Chapter3</a><time datetime="2024-11-01T05:18:00.000Z" title="发表于 2024-11-01 13:18:00">2024-11-01</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/363590279/" title="计网Chapter2">计网Chapter2</a><time datetime="2024-10-30T02:31:00.000Z" title="发表于 2024-10-30 10:31:00">2024-10-30</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/2296455701/" title="计网Chapter 1">计网Chapter 1</a><time datetime="2024-09-18T09:57:00.000Z" title="发表于 2024-09-18 17:57:00">2024-09-18</time></div></div></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/2955879062/" title="使用 Python BeautifulSoup 提取指定网页特定区域图片并显示图片大小">使用 Python BeautifulSoup 提取指定网页特定区域图片并显示图片大小</a><time datetime="2025-04-30T02:28:00.000Z" title="发表于 2025-04-30 10:28:00">2025-04-30</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/230909329/" title="Python实验十五">Python实验十五</a><time datetime="2025-04-16T06:52:00.000Z" title="发表于 2025-04-16 14:52:00">2025-04-16</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/270600148/" title="Python实验十四">Python实验十四</a><time datetime="2025-04-16T06:47:00.000Z" title="发表于 2025-04-16 14:47:00">2025-04-16</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/1559456714/" title="Python实验十三">Python实验十三</a><time datetime="2025-04-16T06:41:00.000Z" title="发表于 2025-04-16 14:41:00">2025-04-16</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/222697760/" title="计网实验报告">计网实验报告</a><time datetime="2025-04-15T13:02:00.000Z" title="发表于 2025-04-15 21:02:00">2025-04-15</time></div></div></div></div></div></div></main><footer id="footer" style="background: transparent;"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2025 By Crayz</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"><script>(async () => {
  const showKatex = () => {
    document.querySelectorAll('#article-container .katex').forEach(el => el.classList.add('katex-show'))
  }

  if (!window.katex_js_css) {
    window.katex_js_css = true
    await btf.getCSS('https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css')
    if (false) {
      await btf.getScript('https://cdn.jsdelivr.net/npm/katex/dist/contrib/copy-tex.min.js')
    }
  }

  showKatex()
})()</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>